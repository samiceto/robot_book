"use strict";(self.webpackChunkphysical_ai_humanoid_robotics_book=self.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[701],{7707:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"part2-simulation/gazebo-basics","title":"Chapter 5: Gazebo Basics","description":"Learning Objectives","source":"@site/docs/part2-simulation/05-gazebo-basics.md","sourceDirName":"part2-simulation","slug":"/part2-simulation/gazebo-basics","permalink":"/robot_book/docs/part2-simulation/gazebo-basics","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"bookSidebar","previous":{"title":"Chapter 4: Robot Description - URDF, SDF, and Xacro for Humanoids","permalink":"/robot_book/docs/part1-foundations/robot-description-urdf-sdf"},"next":{"title":"Chapter 6: NVIDIA Isaac Sim - Introduction and Setup","permalink":"/robot_book/docs/part2-simulation/isaac-sim-introduction"}}');var r=s(4848),o=s(8453);const a={},l="Chapter 5: Gazebo Basics",t={},c=[{value:"1. Gazebo vs. Isaac Sim: When to Use Which",id:"1-gazebo-vs-isaac-sim-when-to-use-which",level:2},{value:"1.1 Open-Source vs. Proprietary Tradeoffs",id:"11-open-source-vs-proprietary-tradeoffs",level:3},{value:"1.2 Physics Engines: ODE, Bullet, DART vs. PhysX",id:"12-physics-engines-ode-bullet-dart-vs-physx",level:3},{value:"1.3 Rendering: Ogre vs. RTX Ray Tracing",id:"13-rendering-ogre-vs-rtx-ray-tracing",level:3},{value:"2. Gazebo Architecture",id:"2-gazebo-architecture",level:2},{value:"2.1 Client-Server Model",id:"21-client-server-model",level:3},{value:"2.2 Worlds, Models, Actors, Sensors",id:"22-worlds-models-actors-sensors",level:3},{value:"2.3 Plugin System",id:"23-plugin-system",level:3},{value:"3. Launching Gazebo with ROS 2",id:"3-launching-gazebo-with-ros-2",level:2},{value:"3.1 Installing Gazebo Harmonic",id:"31-installing-gazebo-harmonic",level:3},{value:"3.2 <code>ros_gz_bridge</code>: Connecting ROS 2 and Gazebo",id:"32-ros_gz_bridge-connecting-ros-2-and-gazebo",level:3},{value:"3.3 Spawning Humanoid URDF in Gazebo World",id:"33-spawning-humanoid-urdf-in-gazebo-world",level:3},{value:"4. Physics Configuration",id:"4-physics-configuration",level:2},{value:"4.1 Gravity, Time Step, Solver Iterations",id:"41-gravity-time-step-solver-iterations",level:3},{value:"4.2 Contact Parameters: Friction, Restitution, Damping",id:"42-contact-parameters-friction-restitution-damping",level:3},{value:"4.3 Performance Tuning: Real-Time Factor",id:"43-performance-tuning-real-time-factor",level:3},{value:"5. Sensor Plugins",id:"5-sensor-plugins",level:2},{value:"5.1 Camera Sensor (RGB, Depth)",id:"51-camera-sensor-rgb-depth",level:3},{value:"5.2 IMU Sensor",id:"52-imu-sensor",level:3},{value:"5.3 LiDAR Sensor",id:"53-lidar-sensor",level:3},{value:"5.4 Contact Sensors",id:"54-contact-sensors",level:3},{value:"6. Hands-On Lab: Humanoid in Gazebo with Camera and IMU",id:"6-hands-on-lab-humanoid-in-gazebo-with-camera-and-imu",level:2},{value:"Lab Setup",id:"lab-setup",level:3},{value:"Step 1: Create Gazebo World (1 hour)",id:"step-1-create-gazebo-world-1-hour",level:3},{value:"Step 2: Add Sensors to Humanoid SDF (2 hours)",id:"step-2-add-sensors-to-humanoid-sdf-2-hours",level:3},{value:"Step 3: Create Model Configuration (15 minutes)",id:"step-3-create-model-configuration-15-minutes",level:3},{value:"Step 4: Create Launch File (30 minutes)",id:"step-4-create-launch-file-30-minutes",level:3},{value:"Step 5: Build and Run (30 minutes)",id:"step-5-build-and-run-30-minutes",level:3},{value:"Step 6: Verify Sensor Data (1 hour)",id:"step-6-verify-sensor-data-1-hour",level:3},{value:"Step 7: Debugging (1-2 hours)",id:"step-7-debugging-1-2-hours",level:3},{value:"7. End-of-Chapter Project: Custom Gazebo World with Obstacles",id:"7-end-of-chapter-project-custom-gazebo-world-with-obstacles",level:2},{value:"Summary",id:"summary",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"chapter-5-gazebo-basics",children:"Chapter 5: Gazebo Basics"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Learning Objectives"})}),"\n",(0,r.jsx)(e.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"Compare Gazebo and Isaac Sim and choose the right simulator for your project"}),"\n",(0,r.jsx)(e.li,{children:"Understand Gazebo's client-server architecture and plugin system"}),"\n",(0,r.jsxs)(e.li,{children:["Install Gazebo Harmonic and configure the ROS 2 bridge (",(0,r.jsx)(e.code,{children:"ros_gz_bridge"}),")"]}),"\n",(0,r.jsx)(e.li,{children:"Spawn humanoid robots in Gazebo worlds with proper physics configuration"}),"\n",(0,r.jsx)(e.li,{children:"Configure physics parameters (gravity, time step, contact properties) for realistic simulation"}),"\n",(0,r.jsx)(e.li,{children:"Add sensor plugins (camera, IMU, LiDAR, contact sensors) to robot models"}),"\n",(0,r.jsx)(e.li,{children:"Debug common Gazebo issues (real-time factor, unstable physics, missing sensor data)"}),"\n",(0,r.jsx)(e.li,{children:"Build custom Gazebo worlds with terrain, obstacles, and lighting"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Prerequisites"}),": Chapter 4 (URDF/SDF), basic Linux command line, ROS 2 fundamentals"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Estimated Time"}),": 8-10 hours (4 hours reading, 4-6 hours hands-on lab)"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"1-gazebo-vs-isaac-sim-when-to-use-which",children:"1. Gazebo vs. Isaac Sim: When to Use Which"}),"\n",(0,r.jsx)(e.h3,{id:"11-open-source-vs-proprietary-tradeoffs",children:"1.1 Open-Source vs. Proprietary Tradeoffs"}),"\n",(0,r.jsx)(e.p,{children:"Both Gazebo and NVIDIA Isaac Sim are physics-based robot simulators, but they serve different use cases:"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Feature"}),(0,r.jsx)(e.th,{children:"Gazebo Harmonic"}),(0,r.jsx)(e.th,{children:"NVIDIA Isaac Sim 2024.2"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"License"})}),(0,r.jsx)(e.td,{children:"Apache 2.0 (Open Source)"}),(0,r.jsx)(e.td,{children:"Free for non-commercial, subscription for commercial"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Primary Use Case"})}),(0,r.jsx)(e.td,{children:"General robotics, ROS 2 integration"}),(0,r.jsx)(e.td,{children:"Physical AI, VLA training, sim-to-real transfer"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Physics Engine"})}),(0,r.jsx)(e.td,{children:"ODE, Bullet, DART (choice)"}),(0,r.jsx)(e.td,{children:"PhysX 5.x (GPU-accelerated)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Rendering"})}),(0,r.jsx)(e.td,{children:"Ogre 2.x (traditional rasterization)"}),(0,r.jsx)(e.td,{children:"RTX ray tracing, path tracing"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Performance"})}),(0,r.jsx)(e.td,{children:"CPU-based, ~30-60 FPS for single robot"}),(0,r.jsx)(e.td,{children:"GPU-accelerated, 1000+ parallel envs on single GPU"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Sensor Fidelity"})}),(0,r.jsx)(e.td,{children:"Good (RGB, depth, LiDAR)"}),(0,r.jsx)(e.td,{children:"Excellent (physically-based camera, RTX LiDAR)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"ROS 2 Integration"})}),(0,r.jsxs)(e.td,{children:["Native (",(0,r.jsx)(e.code,{children:"ros_gz_bridge"}),")"]}),(0,r.jsx)(e.td,{children:"Via Isaac ROS packages"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Learning Curve"})}),(0,r.jsx)(e.td,{children:"Moderate (well-documented)"}),(0,r.jsx)(e.td,{children:"Steep (Omniverse ecosystem)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Hardware Requirements"})}),(0,r.jsx)(e.td,{children:"CPU: 4+ cores, RAM: 8GB, GPU: Optional"}),(0,r.jsx)(e.td,{children:"GPU: RTX 3070+ (8GB VRAM), RAM: 32GB"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Commercial Support"})}),(0,r.jsx)(e.td,{children:"Community-driven"}),(0,r.jsx)(e.td,{children:"NVIDIA Enterprise support"})]})]})]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"When to Use Gazebo"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u2705 Open-source projects, academic research, teaching"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 ROS 2-native workflows (tight integration)"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 CPU-only or low-end GPU hardware"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 Rapid prototyping without GPU cluster"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 Traditional robotics (arms, mobile robots, basic humanoids)"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"When to Use Isaac Sim"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u2705 Physical AI and VLA model training (need 1000+ parallel envs)"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 Photorealistic rendering for vision models (RTX ray tracing)"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 High-fidelity contact dynamics (grasping, manipulation)"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 Sim-to-real transfer (NVIDIA Jetson deployment)"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 Access to RTX-capable GPUs (3070+)"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Hybrid Approach"})," (Recommended):"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Prototyping"}),": Gazebo (fast iteration, free, easy setup)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"VLA Training"}),": Isaac Sim (GPU parallelization, synthetic data generation)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Hardware Testing"}),": Real robot (Jetson Orin + cameras)"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["In this chapter, we focus on ",(0,r.jsx)(e.strong,{children:"Gazebo"})," for rapid prototyping and ROS 2 integration. Chapter 6-7 cover Isaac Sim for advanced use cases."]}),"\n",(0,r.jsx)(e.h3,{id:"12-physics-engines-ode-bullet-dart-vs-physx",children:"1.2 Physics Engines: ODE, Bullet, DART vs. PhysX"}),"\n",(0,r.jsx)(e.p,{children:"Gazebo supports multiple physics engines via plugins:"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"ODE (Open Dynamics Engine)"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Pros"}),": Stable, well-tested, default in Gazebo Classic"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Cons"}),": Slow for complex scenes, inaccurate contact for small objects"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Use Case"}),": Simple mobile robots, basic manipulation"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Bullet"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Pros"}),": Fast, good for rigid body dynamics, multithreading support"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Cons"}),": Less stable than ODE for high-DOF systems (humanoids)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Use Case"}),": Fast prototyping, multi-robot simulations"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"DART (Dynamic Animation and Robotics Toolkit)"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Pros"}),": Excellent for humanoids (accurate contact, muscle models)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Cons"}),": Slower than Bullet, requires careful tuning"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Use Case"}),": Bipedal locomotion, manipulation with compliant contact"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"PhysX 5.x (Isaac Sim)"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Pros"}),": GPU-accelerated, highly parallel, accurate soft body physics"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Cons"}),": NVIDIA GPUs only, closed-source"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Use Case"}),": Large-scale RL training, sim-to-real transfer"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Recommendation for Humanoids"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gazebo"}),": Use ",(0,r.jsx)(e.strong,{children:"DART"})," for bipedal walking (better contact stability)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Isaac Sim"}),": Use ",(0,r.jsx)(e.strong,{children:"PhysX"})," for VLA training (GPU parallelization)"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"13-rendering-ogre-vs-rtx-ray-tracing",children:"1.3 Rendering: Ogre vs. RTX Ray Tracing"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Gazebo (Ogre 2.x)"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Traditional rasterization (forward/deferred shading)"}),"\n",(0,r.jsx)(e.li,{children:"Phong/Blinn-Phong materials"}),"\n",(0,r.jsx)(e.li,{children:"Real-time shadows (shadow maps)"}),"\n",(0,r.jsx)(e.li,{children:"~30-60 FPS for typical scenes"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Limitation"}),": Not physically accurate for vision (poor reflections, global illumination)"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Isaac Sim (RTX)"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Hardware ray tracing (RTX cores)"}),"\n",(0,r.jsx)(e.li,{children:"Physically-based rendering (PBR materials)"}),"\n",(0,r.jsx)(e.li,{children:"Path tracing for global illumination"}),"\n",(0,r.jsx)(e.li,{children:"~10-30 FPS for single env, scales to 1000+ envs"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Advantage"}),": Photorealistic images for VLA training (reduces sim-to-real gap)"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Impact on Physical AI"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gazebo"}),": Good for testing algorithms, not for training vision models"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Isaac Sim"}),": Required for training VLAs on synthetic data (OpenVLA, RT-2)"]}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"2-gazebo-architecture",children:"2. Gazebo Architecture"}),"\n",(0,r.jsx)(e.h3,{id:"21-client-server-model",children:"2.1 Client-Server Model"}),"\n",(0,r.jsxs)(e.p,{children:["Gazebo uses a ",(0,r.jsx)(e.strong,{children:"distributed architecture"})," with separate processes:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Gazebo Ecosystem                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u2502\n\u2502  \u2502  gz sim      \u2502\u25c4\u2500\u2500\u2500\u2500\u25ba\u2502  Transport   \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  (Server)    \u2502      \u2502  (Ignition   \u2502               \u2502   \u2502\n\u2502  \u2502              \u2502      \u2502  Transport)  \u2502               \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502   \u2502\n\u2502         \u2502                      \u25b2                       \u2502   \u2502\n\u2502         \u2502 Physics/Sensors      \u2502 Topics/Services      \u2502   \u2502\n\u2502         \u25bc                      \u2502                       \u2502   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u2502                       \u2502   \u2502\n\u2502  \u2502  Plugins     \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                       \u2502   \u2502\n\u2502  \u2502  (Sensors,   \u2502                                      \u2502   \u2502\n\u2502  \u2502   Physics)   \u2502                                      \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                      \u2502   \u2502\n\u2502                                                         \u2502   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u2502   \u2502\n\u2502  \u2502  gz sim -g   \u2502\u25c4\u2500\u2500\u2500\u2500\u25ba\u2502  ROS 2 (DDS) \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   \u2502\n\u2502  \u2502  (GUI Client)\u2502      \u2502              \u2502               \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502   \u2502\n\u2502                               \u25b2                        \u2502   \u2502\n\u2502                               \u2502                        \u2502   \u2502\n\u2502                        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u2502   \u2502\n\u2502                        \u2502 ros_gz_bridge\u2502               \u2502   \u2502\n\u2502                        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502   \u2502\n\u2502                                                         \u2502   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Components"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"gz sim"})," (Server)"]}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Runs physics simulation (ODE/Bullet/DART)"}),"\n",(0,r.jsx)(e.li,{children:"Manages world state (models, actors, lights)"}),"\n",(0,r.jsx)(e.li,{children:"Publishes sensor data via Ignition Transport"}),"\n",(0,r.jsxs)(e.li,{children:["Headless mode: ",(0,r.jsx)(e.code,{children:"gz sim -r world.sdf"})," (no GUI, for CI/cluster)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsxs)(e.strong,{children:[(0,r.jsx)(e.code,{children:"gz sim -g"})," (GUI Client)"]}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Visualizes simulation (Ogre 2.x rendering)"}),"\n",(0,r.jsx)(e.li,{children:"Provides entity inspector, topic viewer, transform control"}),"\n",(0,r.jsx)(e.li,{children:"Can run on separate machine (network transparency)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Ignition Transport"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Custom pub-sub middleware (not DDS)"}),"\n",(0,r.jsxs)(e.li,{children:["Topics: ",(0,r.jsx)(e.code,{children:"/model/robot/joint_states"}),", ",(0,r.jsx)(e.code,{children:"/camera/image"})]}),"\n",(0,r.jsxs)(e.li,{children:["Services: ",(0,r.jsx)(e.code,{children:"/world/default/create"}),", ",(0,r.jsx)(e.code,{children:"/world/default/set_pose"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:(0,r.jsx)(e.code,{children:"ros_gz_bridge"})}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Bidirectional bridge between Ignition Transport \u2194 ROS 2 (DDS)"}),"\n",(0,r.jsxs)(e.li,{children:["Maps Gazebo topics to ROS 2 topics (e.g., ",(0,r.jsx)(e.code,{children:"/camera/image"})," \u2192 ",(0,r.jsx)(e.code,{children:"/camera/image_raw"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Key Difference from Gazebo Classic"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Classic"}),": Monolithic server with embedded GUI (single process)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Harmonic"}),": Separate server/client (scalable, can run headless on cluster)"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"22-worlds-models-actors-sensors",children:"2.2 Worlds, Models, Actors, Sensors"}),"\n",(0,r.jsx)(e.p,{children:"Gazebo organizes entities hierarchically:"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"World"})," (",(0,r.jsx)(e.code,{children:".sdf"})," file):"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Top-level container"}),"\n",(0,r.jsx)(e.li,{children:"Physics settings (gravity, time step)"}),"\n",(0,r.jsx)(e.li,{children:"Lights, ground plane, atmosphere"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<sdf version="1.9">\n  <world name="humanoid_world">\n    <physics name="default_physics" type="dart">\n      <max_step_size>0.001</max_step_size>\n      <real_time_factor>1.0</real_time_factor>\n    </physics>\n\n    <light name="sun" type="directional">\n      <pose>0 0 10 0 0 0</pose>\n      <diffuse>1.0 1.0 1.0 1.0</diffuse>\n      <specular>0.5 0.5 0.5 1.0</specular>\n      <direction>-0.5 0.1 -0.9</direction>\n    </light>\n\n    <model name="ground_plane">\n      <static>true</static>\n      <link name="link">\n        <collision name="collision">\n          <geometry>\n            <plane><normal>0 0 1</normal></plane>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <plane><normal>0 0 1</normal><size>100 100</size></plane>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n    <include>\n      <uri>model://humanoid_12dof</uri>\n      <pose>0 0 1.0 0 0 0</pose>\n    </include>\n  </world>\n</sdf>\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Model"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Composed of links (rigid bodies) and joints (constraints)"}),"\n",(0,r.jsxs)(e.li,{children:["Can be included from model database: ",(0,r.jsx)(e.code,{children:"<include><uri>model://name</uri></include>"})]}),"\n",(0,r.jsx)(e.li,{children:"SDF format (same as URDF structure, but with additional features)"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Actor"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Scripted entity with pre-defined trajectory (e.g., walking human for obstacle avoidance)"}),"\n",(0,r.jsxs)(e.li,{children:["Uses skeletal animation (Collada ",(0,r.jsx)(e.code,{children:".dae"})," files)"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Sensor"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Attached to links via ",(0,r.jsx)(e.code,{children:"<sensor>"})," tag"]}),"\n",(0,r.jsx)(e.li,{children:"Types: camera, depth_camera, imu, lidar, contact, force_torque"}),"\n",(0,r.jsx)(e.li,{children:"Publishes data via Ignition Transport topics"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"23-plugin-system",children:"2.3 Plugin System"}),"\n",(0,r.jsxs)(e.p,{children:["Gazebo extensibility comes from ",(0,r.jsx)(e.strong,{children:"plugins"})," (shared libraries loaded at runtime):"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Plugin Types"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"World Plugin"}),": Global behavior (e.g., wind, custom physics)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Model Plugin"}),": Robot-specific (e.g., joint controller, ROS 2 bridge)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Sensor Plugin"}),": Sensor data processing (e.g., image compression, noise injection)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"System Plugin"}),": Core Gazebo features (e.g., physics engine, rendering)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"GUI Plugin"}),": Custom UI panels"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Example"}),": ROS 2 Joint State Publisher Plugin (model plugin)"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<model name="humanoid">\n  <plugin filename="gz-sim-joint-state-publisher-system" name="gz::sim::systems::JointStatePublisher">\n    <joint_name>left_hip_joint</joint_name>\n    <joint_name>left_knee_joint</joint_name>\n    <joint_name>right_hip_joint</joint_name>\n    <joint_name>right_knee_joint</joint_name>\n    <update_rate>50</update_rate>\n  </plugin>\n</model>\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Custom Plugin"})," (C++):"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-cpp",children:"#include <gz/sim/System.hh>\n#include <gz/plugin/Register.hh>\n\nnamespace my_plugins {\nclass CustomController : public gz::sim::System,\n                          public gz::sim::ISystemConfigure,\n                          public gz::sim::ISystemPreUpdate {\n  public:\n    void Configure(const gz::sim::Entity &entity,\n                   const std::shared_ptr<const sdf::Element> &sdf,\n                   gz::sim::EntityComponentManager &ecm,\n                   gz::sim::EventManager &eventMgr) override {\n      // Initialize plugin\n    }\n\n    void PreUpdate(const gz::sim::UpdateInfo &info,\n                   gz::sim::EntityComponentManager &ecm) override {\n      // Called every simulation step\n    }\n};\n}\n\nGZ_ADD_PLUGIN(my_plugins::CustomController,\n              gz::sim::System,\n              my_plugins::CustomController::ISystemConfigure,\n              my_plugins::CustomController::ISystemPreUpdate)\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"3-launching-gazebo-with-ros-2",children:"3. Launching Gazebo with ROS 2"}),"\n",(0,r.jsx)(e.h3,{id:"31-installing-gazebo-harmonic",children:"3.1 Installing Gazebo Harmonic"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Prerequisites"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Ubuntu 22.04 LTS (ROS 2 Iron) or Ubuntu 24.04 LTS (ROS 2 Jazzy)"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Installation"})," (Binary packages):"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# Add Gazebo repository\nsudo wget https://packages.osrfoundation.org/gazebo.gpg -O /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] http://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/gazebo-stable.list > /dev/null\n\n# Update and install Gazebo Harmonic\nsudo apt update\nsudo apt install gz-harmonic\n\n# Verify installation\ngz sim --version\n# Expected output: Gazebo Sim, version 8.x.x\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Install ROS 2 Integration Packages"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# ROS 2 Iron (Ubuntu 22.04)\nsudo apt install ros-iron-ros-gz\n\n# ROS 2 Jazzy (Ubuntu 24.04)\nsudo apt install ros-jazzy-ros-gz\n\n# This installs:\n# - ros_gz_bridge: ROS 2 \u2194 Gazebo topic bridge\n# - ros_gz_sim: Launch file integration\n# - ros_gz_image: Image transport bridge\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Test Installation"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Terminal 1: Launch Gazebo with empty world\ngz sim empty.sdf\n\n# Terminal 2: List Gazebo topics\ngz topic -l\n# Expected:\n# /clock\n# /stats\n# /world/empty/clock\n# /world/empty/stats\n"})}),"\n",(0,r.jsxs)(e.h3,{id:"32-ros_gz_bridge-connecting-ros-2-and-gazebo",children:["3.2 ",(0,r.jsx)(e.code,{children:"ros_gz_bridge"}),": Connecting ROS 2 and Gazebo"]}),"\n",(0,r.jsx)(e.p,{children:"The bridge maps Gazebo topics (Ignition Transport) to ROS 2 topics (DDS):"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Launch Bridge"})," (manual):"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Bridge single topic: Gazebo \u2192 ROS 2\nros2 run ros_gz_bridge parameter_bridge /clock@rosgraph_msgs/msg/Clock[gz.msgs.Clock\n\n# Bridge bidirectional: ROS 2 \u2194 Gazebo\nros2 run ros_gz_bridge parameter_bridge \\\n  /cmd_vel@geometry_msgs/msg/Twist]gz.msgs.Twist \\\n  /odom@nav_msgs/msg/Odometry[gz.msgs.Odometry\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Bridge Configuration"})," (YAML file):"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:'# bridge_config.yaml\n- topic_name: "/camera/image_raw"\n  ros_type_name: "sensor_msgs/msg/Image"\n  gz_type_name: "gz.msgs.Image"\n  direction: GZ_TO_ROS\n\n- topic_name: "/imu"\n  ros_type_name: "sensor_msgs/msg/Imu"\n  gz_type_name: "gz.msgs.IMU"\n  direction: GZ_TO_ROS\n\n- topic_name: "/joint_states"\n  ros_type_name: "sensor_msgs/msg/JointState"\n  gz_type_name: "gz.msgs.Model"\n  direction: GZ_TO_ROS\n\n- topic_name: "/cmd_vel"\n  ros_type_name: "geometry_msgs/msg/Twist"\n  gz_type_name: "gz.msgs.Twist"\n  direction: ROS_TO_GZ\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Launch with YAML"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"ros2 run ros_gz_bridge parameter_bridge --ros-args \\\n  -p config_file:=path/to/bridge_config.yaml\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Common Topic Mappings"}),":"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"ROS 2 Topic"}),(0,r.jsx)(e.th,{children:"ROS 2 Type"}),(0,r.jsx)(e.th,{children:"Gazebo Topic"}),(0,r.jsx)(e.th,{children:"Gazebo Type"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"/camera/image_raw"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"sensor_msgs/msg/Image"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"/camera/image"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"gz.msgs.Image"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"/imu"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"sensor_msgs/msg/Imu"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"/imu"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"gz.msgs.IMU"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"/joint_states"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"sensor_msgs/msg/JointState"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"/world/default/model/robot/joint_state"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"gz.msgs.Model"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"/cmd_vel"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"geometry_msgs/msg/Twist"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"/cmd_vel"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"gz.msgs.Twist"})})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"/scan"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"sensor_msgs/msg/LaserScan"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"/lidar"})}),(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"gz.msgs.LaserScan"})})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"33-spawning-humanoid-urdf-in-gazebo-world",children:"3.3 Spawning Humanoid URDF in Gazebo World"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Method 1: Convert URDF to SDF, Include in World"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Convert URDF to SDF\ngz sdf -p humanoid_12dof.urdf > humanoid.sdf\n\n# Edit world file to include model\n# <include><uri>file://path/to/humanoid.sdf</uri></include>\n\n# Launch Gazebo\ngz sim my_world.sdf\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Method 2: Spawn via ROS 2 Service"})," (dynamic spawning)"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Terminal 1: Launch Gazebo with empty world\ngz sim empty.sdf\n\n# Terminal 2: Spawn robot using ros_gz_sim spawn service\nros2 run ros_gz_sim create -file humanoid.sdf \\\n  -name humanoid -x 0 -y 0 -z 1.0\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Method 3: Launch File Integration"})," (recommended)"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"# launch/gazebo_humanoid.launch.py\nimport os\nfrom launch import LaunchDescription\nfrom launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch_ros.actions import Node\nfrom ament_index_python.packages import get_package_share_directory\n\ndef generate_launch_description():\n    pkg_ros_gz_sim = get_package_share_directory('ros_gz_sim')\n\n    # Gazebo server (headless)\n    gazebo_server = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource(\n            os.path.join(pkg_ros_gz_sim, 'launch', 'gz_sim.launch.py')\n        ),\n        launch_arguments={'gz_args': '-r -v 4 empty.sdf'}.items(),\n    )\n\n    # Gazebo GUI client\n    gazebo_gui = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource(\n            os.path.join(pkg_ros_gz_sim, 'launch', 'gz_sim.launch.py')\n        ),\n        launch_arguments={'gz_args': '-g -v 4'}.items(),\n    )\n\n    # Spawn robot\n    spawn_robot = Node(\n        package='ros_gz_sim',\n        executable='create',\n        arguments=[\n            '-file', '/path/to/humanoid.sdf',\n            '-name', 'humanoid',\n            '-x', '0', '-y', '0', '-z', '1.0'\n        ],\n        output='screen',\n    )\n\n    # ROS 2 \u2194 Gazebo bridge\n    bridge = Node(\n        package='ros_gz_bridge',\n        executable='parameter_bridge',\n        arguments=[\n            '/clock@rosgraph_msgs/msg/Clock[gz.msgs.Clock',\n            '/camera/image_raw@sensor_msgs/msg/Image[gz.msgs.Image',\n            '/imu@sensor_msgs/msg/Imu[gz.msgs.IMU',\n        ],\n        output='screen',\n    )\n\n    return LaunchDescription([\n        gazebo_server,\n        gazebo_gui,\n        spawn_robot,\n        bridge,\n    ])\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Launch"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"ros2 launch my_package gazebo_humanoid.launch.py\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"4-physics-configuration",children:"4. Physics Configuration"}),"\n",(0,r.jsx)(e.h3,{id:"41-gravity-time-step-solver-iterations",children:"4.1 Gravity, Time Step, Solver Iterations"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"World Physics Tag"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<world name="default">\n  <physics name="default_physics" type="dart">\n    \x3c!-- Gravity (m/s\xb2) --\x3e\n    <gravity>0 0 -9.81</gravity>\n\n    \x3c!-- Simulation time step (seconds) --\x3e\n    <max_step_size>0.001</max_step_size>\n\n    \x3c!-- Real-time factor (1.0 = real-time, 0.5 = half-speed) --\x3e\n    <real_time_factor>1.0</real_time_factor>\n\n    \x3c!-- Solver iterations (higher = more accurate, slower) --\x3e\n    <dart>\n      <solver>\n        <solver_type>dantzig</solver_type>\n        <constraint_cfm>0.0</constraint_cfm>\n        <constraint_erp>0.2</constraint_erp>\n      </solver>\n      <collision_detector>bullet</collision_detector>\n    </dart>\n  </physics>\n</world>\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Key Parameters"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:(0,r.jsx)(e.code,{children:"max_step_size"})})," (default: 0.001s = 1ms):"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Smaller = more accurate, slower"}),"\n",(0,r.jsx)(e.li,{children:"For humanoids: 0.001s (1 kHz) recommended for bipedal stability"}),"\n",(0,r.jsx)(e.li,{children:"For wheeled robots: 0.01s (100 Hz) often sufficient"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:(0,r.jsx)(e.code,{children:"real_time_factor"})}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"1.0"}),": Simulation runs at real-time speed"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"< 1.0"}),": Simulation slower than real-time (complex scenes)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"> 1.0"}),": Simulation faster than real-time (simple scenes)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Check RTF in Gazebo GUI"}),': Bottom-right corner shows "RTF: 0.95"']}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Solver Iterations"})," (DART-specific):"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"constraint_cfm"})," (Constraint Force Mixing): Softness (0 = hard, 1e-5 = soft)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"constraint_erp"})," (Error Reduction Parameter): Constraint stabilization (0.2 typical)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Tuning for Humanoids"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<physics name="humanoid_physics" type="dart">\n  <max_step_size>0.0005</max_step_size>  \x3c!-- 2 kHz for fast contacts --\x3e\n  <real_time_factor>1.0</real_time_factor>\n  <dart>\n    <solver>\n      <solver_type>pgs</solver_type>  \x3c!-- Projected Gauss-Seidel (faster) --\x3e\n      <constraint_cfm>0.00001</constraint_cfm>  \x3c!-- Slightly soft constraints --\x3e\n      <constraint_erp>0.2</constraint_erp>\n    </solver>\n    <collision_detector>bullet</collision_detector>  \x3c!-- Fast broad-phase --\x3e\n  </dart>\n</physics>\n'})}),"\n",(0,r.jsx)(e.h3,{id:"42-contact-parameters-friction-restitution-damping",children:"4.2 Contact Parameters: Friction, Restitution, Damping"}),"\n",(0,r.jsxs)(e.p,{children:["Contact properties are defined in ",(0,r.jsx)(e.code,{children:"<collision>"})," tags:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<link name="left_foot">\n  <collision name="collision">\n    <geometry>\n      <box><size>0.15 0.08 0.05</size></box>\n    </geometry>\n    <surface>\n      <friction>\n        <ode>\n          <mu>1.0</mu>    \x3c!-- Coulomb friction (\u03bc) --\x3e\n          <mu2>1.0</mu2>  \x3c!-- Secondary friction direction --\x3e\n          <fdir1>0 0 0</fdir1>  \x3c!-- Friction direction (0 = omnidirectional) --\x3e\n          <slip1>0.0</slip1>\n          <slip2>0.0</slip2>\n        </ode>\n        <bullet>\n          <friction>1.0</friction>\n          <rolling_friction>0.01</rolling_friction>\n        </bullet>\n      </friction>\n      <contact>\n        <ode>\n          <kp>1e6</kp>  \x3c!-- Contact stiffness (N/m) --\x3e\n          <kd>1e3</kd>  \x3c!-- Contact damping (N\xb7s/m) --\x3e\n          <max_vel>0.01</max_vel>  \x3c!-- Max penetration correction velocity --\x3e\n          <min_depth>0.001</min_depth>  \x3c!-- Min penetration before contact --\x3e\n        </ode>\n      </contact>\n      <bounce>\n        <restitution_coefficient>0.0</restitution_coefficient>  \x3c!-- 0 = inelastic, 1 = elastic --\x3e\n        <threshold>0.01</threshold>\n      </bounce>\n    </surface>\n  </collision>\n</link>\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Material Presets"}),":"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Material"}),(0,r.jsxs)(e.th,{children:[(0,r.jsx)(e.code,{children:"mu"})," (Friction)"]}),(0,r.jsx)(e.th,{children:(0,r.jsx)(e.code,{children:"restitution"})}),(0,r.jsx)(e.th,{children:"Use Case"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Rubber (foot)"})}),(0,r.jsx)(e.td,{children:"1.0 - 1.5"}),(0,r.jsx)(e.td,{children:"0.0"}),(0,r.jsx)(e.td,{children:"Bipedal locomotion (high friction, no bounce)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Metal (gripper)"})}),(0,r.jsx)(e.td,{children:"0.5 - 0.8"}),(0,r.jsx)(e.td,{children:"0.3"}),(0,r.jsx)(e.td,{children:"Manipulation (moderate friction, slight bounce)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Ice"})}),(0,r.jsx)(e.td,{children:"0.02 - 0.05"}),(0,r.jsx)(e.td,{children:"0.1"}),(0,r.jsx)(e.td,{children:"Slippery terrain testing"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Wood (table)"})}),(0,r.jsx)(e.td,{children:"0.4 - 0.6"}),(0,r.jsx)(e.td,{children:"0.5"}),(0,r.jsx)(e.td,{children:"Typical indoor surface"})]})]})]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Common Issue"}),": Robot sinking into floor"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Cause"}),": ",(0,r.jsx)(e.code,{children:"kp"})," (stiffness) too low"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fix"}),": Increase to ",(0,r.jsx)(e.code,{children:"1e7"})," or higher"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"43-performance-tuning-real-time-factor",children:"4.3 Performance Tuning: Real-Time Factor"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Monitoring RTF"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check simulation stats\ngz topic -e -t /stats\n\n# Expected output:\n# sim_time: 10.523\n# real_time: 10.500\n# iterations: 10523\n# real_time_factor: 1.002  # Good! Close to 1.0\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Improving RTF"})," (if < 0.9):"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Reduce Physics Complexity"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Simplify collision geometry (use boxes instead of meshes)"}),"\n",(0,r.jsxs)(e.li,{children:["Reduce ",(0,r.jsx)(e.code,{children:"max_step_size"})," only if needed (try 0.002s instead of 0.001s)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Optimize Rendering"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Run headless: ",(0,r.jsx)(e.code,{children:"gz sim -r -s world.sdf"})," (no GUI)"]}),"\n",(0,r.jsx)(e.li,{children:"Disable shadows in GUI: View \u2192 Shadows \u2192 Off"}),"\n",(0,r.jsxs)(e.li,{children:["Reduce camera resolution in SDF: ",(0,r.jsx)(e.code,{children:"<width>320</width><height>240</height>"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Use Faster Physics Engine"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Switch from DART to Bullet: ",(0,r.jsx)(e.code,{children:'<physics type="bullet">'})]}),"\n",(0,r.jsx)(e.li,{children:"Trade accuracy for speed (Bullet faster, DART more accurate)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Parallelize"})," (advanced):"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Use Gazebo Island Threading (automatic for disconnected models)"}),"\n",(0,r.jsx)(e.li,{children:"Run multiple Gazebo instances with different world portions"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"5-sensor-plugins",children:"5. Sensor Plugins"}),"\n",(0,r.jsx)(e.h3,{id:"51-camera-sensor-rgb-depth",children:"5.1 Camera Sensor (RGB, Depth)"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"RGB Camera"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<link name="camera_link">\n  <sensor name="camera" type="camera">\n    <pose>0.1 0 0 0 0 0</pose>\n    <update_rate>30</update_rate>\n    <camera name="head_camera">\n      <horizontal_fov>1.3962634</horizontal_fov>  \x3c!-- 80\xb0 FOV --\x3e\n      <image>\n        <width>640</width>\n        <height>480</height>\n        <format>R8G8B8</format>  \x3c!-- RGB 24-bit --\x3e\n      </image>\n      <clip>\n        <near>0.02</near>  \x3c!-- Near clipping plane (m) --\x3e\n        <far>10.0</far>    \x3c!-- Far clipping plane (m) --\x3e\n      </clip>\n      <noise>\n        <type>gaussian</type>\n        <mean>0.0</mean>\n        <stddev>0.007</stddev>  \x3c!-- ~2/255 noise per pixel --\x3e\n      </noise>\n    </camera>\n    <always_on>true</always_on>\n    <visualize>true</visualize>\n    <topic>/camera/image_raw</topic>\n  </sensor>\n</link>\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Depth Camera"})," (RGB-D):"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<sensor name="rgbd_camera" type="depth_camera">\n  <update_rate>30</update_rate>\n  <camera name="depth_camera">\n    <horizontal_fov>1.3962634</horizontal_fov>\n    <image>\n      <width>640</width>\n      <height>480</height>\n      <format>R_FLOAT32</format>  \x3c!-- Depth in meters --\x3e\n    </image>\n    <clip>\n      <near>0.1</near>\n      <far>8.0</far>\n    </clip>\n  </camera>\n  <topic>/camera/depth</topic>\n</sensor>\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Verify Camera in ROS 2"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Bridge camera topic\nros2 run ros_gz_bridge parameter_bridge \\\n  /camera/image_raw@sensor_msgs/msg/Image[gz.msgs.Image\n\n# View image in RViz\nros2 run rviz2 rviz2\n\n# Or use rqt_image_view\nros2 run rqt_image_view rqt_image_view\n"})}),"\n",(0,r.jsx)(e.h3,{id:"52-imu-sensor",children:"5.2 IMU Sensor"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"IMU Configuration"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<link name="imu_link">\n  <sensor name="imu_sensor" type="imu">\n    <always_on>true</always_on>\n    <update_rate>100</update_rate>  \x3c!-- 100 Hz typical for control --\x3e\n    <imu>\n      <angular_velocity>\n        <x>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>0.009</stddev>  \x3c!-- 0.5 deg/s noise --\x3e\n            <bias_mean>0.00008</bias_mean>\n            <bias_stddev>0.00004</bias_stddev>\n          </noise>\n        </x>\n        \x3c!-- Repeat for y, z --\x3e\n      </angular_velocity>\n      <linear_acceleration>\n        <x>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>0.017</stddev>  \x3c!-- 0.017 m/s\xb2 noise (typical IMU) --\x3e\n            <bias_mean>0.1</bias_mean>\n            <bias_stddev>0.008</bias_stddev>\n          </noise>\n        </x>\n        \x3c!-- Repeat for y, z --\x3e\n      </linear_acceleration>\n    </imu>\n    <topic>/imu</topic>\n  </sensor>\n</link>\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Key Parameters"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"stddev"}),": White noise (random at each timestep)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"bias_mean"}),": Constant offset (simulates calibration error)"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"bias_stddev"}),": Drift over time (random walk)"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Realistic IMU Specs"})," (from datasheets):"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"IMU Type"}),(0,r.jsx)(e.th,{children:"Gyro Noise (deg/s)"}),(0,r.jsx)(e.th,{children:"Accel Noise (m/s\xb2)"}),(0,r.jsx)(e.th,{children:"Update Rate"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"MPU-6050 (Budget)"})}),(0,r.jsx)(e.td,{children:"0.5"}),(0,r.jsx)(e.td,{children:"0.03"}),(0,r.jsx)(e.td,{children:"100 Hz"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"BMI088 (Mid-range)"})}),(0,r.jsx)(e.td,{children:"0.1"}),(0,r.jsx)(e.td,{children:"0.015"}),(0,r.jsx)(e.td,{children:"400 Hz"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"ADIS16505 (Premium)"})}),(0,r.jsx)(e.td,{children:"0.005"}),(0,r.jsx)(e.td,{children:"0.005"}),(0,r.jsx)(e.td,{children:"2000 Hz"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"53-lidar-sensor",children:"5.3 LiDAR Sensor"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"2D LiDAR (Laser Scanner)"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<sensor name="lidar" type="gpu_lidar">\n  <update_rate>10</update_rate>\n  <lidar>\n    <scan>\n      <horizontal>\n        <samples>360</samples>  \x3c!-- 1\xb0 angular resolution --\x3e\n        <resolution>1.0</resolution>\n        <min_angle>-3.14159</min_angle>  \x3c!-- -180\xb0 --\x3e\n        <max_angle>3.14159</max_angle>   \x3c!-- +180\xb0 --\x3e\n      </horizontal>\n    </scan>\n    <range>\n      <min>0.08</min>\n      <max>10.0</max>\n      <resolution>0.01</resolution>\n    </range>\n    <noise>\n      <type>gaussian</type>\n      <mean>0.0</mean>\n      <stddev>0.01</stddev>  \x3c!-- 1 cm noise --\x3e\n    </noise>\n  </lidar>\n  <topic>/scan</topic>\n  <visualize>true</visualize>\n</sensor>\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"3D LiDAR"})," (Velodyne-like):"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<sensor name="lidar_3d" type="gpu_lidar">\n  <update_rate>10</update_rate>\n  <lidar>\n    <scan>\n      <horizontal>\n        <samples>1800</samples>  \x3c!-- 0.2\xb0 resolution --\x3e\n        <resolution>1.0</resolution>\n        <min_angle>-3.14159</min_angle>\n        <max_angle>3.14159</max_angle>\n      </horizontal>\n      <vertical>\n        <samples>16</samples>  \x3c!-- 16 laser beams --\x3e\n        <resolution>1.0</resolution>\n        <min_angle>-0.2618</min_angle>  \x3c!-- -15\xb0 --\x3e\n        <max_angle>0.2618</max_angle>   \x3c!-- +15\xb0 --\x3e\n      </vertical>\n    </scan>\n    <range>\n      <min>0.1</min>\n      <max>100.0</max>\n    </range>\n  </lidar>\n  <topic>/lidar/points</topic>\n</sensor>\n'})}),"\n",(0,r.jsx)(e.h3,{id:"54-contact-sensors",children:"5.4 Contact Sensors"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Force/Torque Sensor"})," (for feet):"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<link name="left_foot">\n  <sensor name="left_foot_contact" type="contact">\n    <contact>\n      <collision>left_foot_collision</collision>\n    </contact>\n    <update_rate>100</update_rate>\n    <topic>/left_foot/contact</topic>\n  </sensor>\n</link>\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Contact State"})," (boolean contact detection):"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<sensor name="bumper" type="contact">\n  <contact>\n    <collision>torso_collision</collision>\n  </contact>\n  <plugin name="gazebo_ros_bumper" filename="libgazebo_ros_bumper.so">\n    <ros>\n      <namespace>/humanoid</namespace>\n      <remapping>~/out:=bumper_states</remapping>\n    </ros>\n    <frame_name>world</frame_name>\n  </plugin>\n</sensor>\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Verify Contact in ROS 2"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"ros2 topic echo /left_foot/contact\n\n# Expected output (when foot touches ground):\n# contacts:\n# - collision1: left_foot_collision\n#   collision2: ground_plane::link::collision\n#   position: {x: 0.0, y: 0.1, z: 0.0}\n#   normal: {x: 0.0, y: 0.0, z: 1.0}\n#   depth: 0.001\n#   wrench:\n#     force: {x: 0.0, y: 0.0, z: 150.5}  # ~15 kg * 9.81 m/s\xb2\n#     torque: {x: 0.0, y: 0.0, z: 0.0}\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"6-hands-on-lab-humanoid-in-gazebo-with-camera-and-imu",children:"6. Hands-On Lab: Humanoid in Gazebo with Camera and IMU"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Objective"}),": Spawn the Chapter 4 humanoid in Gazebo, add camera and IMU sensors, verify sensor data in ROS 2."]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Time"}),": 4-6 hours"]}),"\n",(0,r.jsx)(e.h3,{id:"lab-setup",children:"Lab Setup"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Create workspace\ncd ~/ros2_ws/src\nros2 pkg create --build-type ament_cmake gazebo_humanoid_lab \\\n  --dependencies ros_gz_sim ros_gz_bridge sensor_msgs\n\ncd gazebo_humanoid_lab\nmkdir worlds models launch config\n"})}),"\n",(0,r.jsx)(e.h3,{id:"step-1-create-gazebo-world-1-hour",children:"Step 1: Create Gazebo World (1 hour)"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"File"}),": ",(0,r.jsx)(e.code,{children:"worlds/humanoid_world.sdf"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<sdf version="1.9">\n  <world name="humanoid_world">\n\n    \x3c!-- Physics --\x3e\n    <physics name="dart_physics" type="dart">\n      <max_step_size>0.001</max_step_size>\n      <real_time_factor>1.0</real_time_factor>\n      <dart>\n        <solver>\n          <solver_type>pgs</solver_type>\n        </solver>\n        <collision_detector>bullet</collision_detector>\n      </dart>\n    </physics>\n\n    \x3c!-- Lighting --\x3e\n    <light name="sun" type="directional">\n      <pose>0 0 10 0 0 0</pose>\n      <diffuse>1.0 1.0 1.0 1.0</diffuse>\n      <specular>0.5 0.5 0.5 1.0</specular>\n      <direction>-0.5 0.1 -0.9</direction>\n      <cast_shadows>true</cast_shadows>\n    </light>\n\n    \x3c!-- Ground Plane --\x3e\n    <model name="ground_plane">\n      <static>true</static>\n      <link name="link">\n        <collision name="collision">\n          <geometry>\n            <plane><normal>0 0 1</normal></plane>\n          </geometry>\n          <surface>\n            <friction>\n              <ode>\n                <mu>1.0</mu>\n                <mu2>1.0</mu2>\n              </ode>\n            </friction>\n          </surface>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <plane><normal>0 0 1</normal><size>100 100</size></plane>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n    \x3c!-- Include Humanoid Model --\x3e\n    <include>\n      <uri>model://humanoid_with_sensors</uri>\n      <pose>0 0 1.0 0 0 0</pose>\n    </include>\n\n  </world>\n</sdf>\n'})}),"\n",(0,r.jsx)(e.h3,{id:"step-2-add-sensors-to-humanoid-sdf-2-hours",children:"Step 2: Add Sensors to Humanoid SDF (2 hours)"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"File"}),": ",(0,r.jsx)(e.code,{children:"models/humanoid_with_sensors/model.sdf"})]}),"\n",(0,r.jsxs)(e.p,{children:["Start with Chapter 4's ",(0,r.jsx)(e.code,{children:"humanoid_12dof.urdf"}),", convert to SDF, then add sensors:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Convert URDF to SDF\ncd ~/ros2_ws/src/robot-book-code/chapter-04-urdf-sdf\ngz sdf -p urdf/humanoid_12dof.urdf > ~/ros2_ws/src/gazebo_humanoid_lab/models/humanoid_with_sensors/model.sdf\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Edit"})," ",(0,r.jsx)(e.code,{children:"model.sdf"})," to add IMU to torso:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'\x3c!-- Inside <model name="humanoid_12dof"> --\x3e\n\x3c!-- After base_link definition --\x3e\n\n<link name="imu_link">\n  <pose relative_to="base_link">0 0 0 0 0 0</pose>\n  <inertial>\n    <mass>0.01</mass>\n    <inertia><ixx>0.00001</ixx><iyy>0.00001</iyy><izz>0.00001</izz></inertia>\n  </inertial>\n\n  <sensor name="imu_sensor" type="imu">\n    <always_on>true</always_on>\n    <update_rate>100</update_rate>\n    <imu>\n      <angular_velocity>\n        <x>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>0.009</stddev>\n          </noise>\n        </x>\n        <y>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>0.009</stddev>\n          </noise>\n        </y>\n        <z>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>0.009</stddev>\n          </noise>\n        </z>\n      </angular_velocity>\n      <linear_acceleration>\n        <x>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>0.017</stddev>\n          </noise>\n        </x>\n        <y>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>0.017</stddev>\n          </noise>\n        </y>\n        <z>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>0.017</stddev>\n          </noise>\n        </z>\n      </linear_acceleration>\n    </imu>\n    <topic>/imu</topic>\n  </sensor>\n</link>\n\n<joint name="imu_joint" type="fixed">\n  <parent>base_link</parent>\n  <child>imu_link</child>\n  <pose>0 0 0 0 0 0</pose>\n</joint>\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Add Camera to Head"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<link name="camera_link">\n  <pose relative_to="head">0.13 0 0 0 0 0</pose>\n  <inertial>\n    <mass>0.1</mass>\n    <inertia><ixx>0.00001</ixx><iyy>0.00001</iyy><izz>0.00001</izz></inertia>\n  </inertial>\n\n  <visual name="visual">\n    <geometry>\n      <box><size>0.02 0.08 0.02</size></box>\n    </geometry>\n    <material>\n      <ambient>0.1 0.1 0.1 1</ambient>\n      <diffuse>0.1 0.1 0.1 1</diffuse>\n    </material>\n  </visual>\n\n  <sensor name="camera" type="camera">\n    <update_rate>30</update_rate>\n    <camera name="head_camera">\n      <horizontal_fov>1.3962634</horizontal_fov>\n      <image>\n        <width>640</width>\n        <height>480</height>\n        <format>R8G8B8</format>\n      </image>\n      <clip>\n        <near>0.02</near>\n        <far>10.0</far>\n      </clip>\n      <noise>\n        <type>gaussian</type>\n        <mean>0.0</mean>\n        <stddev>0.007</stddev>\n      </noise>\n    </camera>\n    <always_on>true</always_on>\n    <visualize>true</visualize>\n    <topic>/camera/image_raw</topic>\n  </sensor>\n</link>\n\n<joint name="camera_joint" type="fixed">\n  <parent>head</parent>\n  <child>camera_link</child>\n  <pose>0.13 0 0 0 0 0</pose>\n</joint>\n'})}),"\n",(0,r.jsx)(e.h3,{id:"step-3-create-model-configuration-15-minutes",children:"Step 3: Create Model Configuration (15 minutes)"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"File"}),": ",(0,r.jsx)(e.code,{children:"models/humanoid_with_sensors/model.config"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<model>\n  <name>Humanoid with Sensors</name>\n  <version>1.0</version>\n  <sdf version="1.9">model.sdf</sdf>\n\n  <author>\n    <name>Your Name</name>\n    <email>your.email@example.com</email>\n  </author>\n\n  <description>\n    12-DOF humanoid robot with RGB camera and IMU sensor for Gazebo simulation.\n  </description>\n</model>\n'})}),"\n",(0,r.jsx)(e.h3,{id:"step-4-create-launch-file-30-minutes",children:"Step 4: Create Launch File (30 minutes)"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"File"}),": ",(0,r.jsx)(e.code,{children:"launch/gazebo_humanoid.launch.py"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"import os\nfrom launch import LaunchDescription\nfrom launch.actions import IncludeLaunchDescription, ExecuteProcess, RegisterEventHandler\nfrom launch.event_handlers import OnProcessExit\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch_ros.actions import Node\nfrom ament_index_python.packages import get_package_share_directory\n\ndef generate_launch_description():\n    pkg_share = get_package_share_directory('gazebo_humanoid_lab')\n    pkg_ros_gz_sim = get_package_share_directory('ros_gz_sim')\n\n    world_file = os.path.join(pkg_share, 'worlds', 'humanoid_world.sdf')\n\n    # Set Gazebo model path\n    model_path = os.path.join(pkg_share, 'models')\n    if 'GZ_SIM_RESOURCE_PATH' in os.environ:\n        os.environ['GZ_SIM_RESOURCE_PATH'] += os.pathsep + model_path\n    else:\n        os.environ['GZ_SIM_RESOURCE_PATH'] = model_path\n\n    # Gazebo Sim\n    gazebo = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource(\n            os.path.join(pkg_ros_gz_sim, 'launch', 'gz_sim.launch.py')\n        ),\n        launch_arguments={'gz_args': f'-r {world_file}'}.items(),\n    )\n\n    # ROS 2 \u2194 Gazebo Bridge\n    bridge = Node(\n        package='ros_gz_bridge',\n        executable='parameter_bridge',\n        arguments=[\n            '/clock@rosgraph_msgs/msg/Clock[gz.msgs.Clock',\n            '/camera/image_raw@sensor_msgs/msg/Image[gz.msgs.Image',\n            '/imu@sensor_msgs/msg/Imu[gz.msgs.IMU',\n        ],\n        output='screen',\n    )\n\n    # Robot State Publisher (for TF frames)\n    robot_state_publisher = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        output='screen',\n        parameters=[{\n            'robot_description': open(os.path.join(\n                get_package_share_directory('robot_book_code'),\n                'chapter-04-urdf-sdf', 'urdf', 'humanoid_12dof.urdf'\n            )).read()\n        }]\n    )\n\n    return LaunchDescription([\n        gazebo,\n        bridge,\n        robot_state_publisher,\n    ])\n"})}),"\n",(0,r.jsx)(e.h3,{id:"step-5-build-and-run-30-minutes",children:"Step 5: Build and Run (30 minutes)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Build workspace\ncd ~/ros2_ws\ncolcon build --packages-select gazebo_humanoid_lab\nsource install/setup.bash\n\n# Launch Gazebo with humanoid\nros2 launch gazebo_humanoid_lab gazebo_humanoid.launch.py\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Expected Result"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Gazebo GUI opens with humanoid standing on ground plane"}),"\n",(0,r.jsx)(e.li,{children:"Robot should be stable (not falling or vibrating)"}),"\n",(0,r.jsx)(e.li,{children:"Camera view visible in Gazebo (green frustum)"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"step-6-verify-sensor-data-1-hour",children:"Step 6: Verify Sensor Data (1 hour)"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Terminal 1"}),": Check ROS 2 topics"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"ros2 topic list\n# Expected:\n# /camera/image_raw\n# /imu\n# /clock\n# /joint_states\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Terminal 2"}),": Monitor IMU data"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"ros2 topic echo /imu --field linear_acceleration\n# Expected (robot standing still):\n# x: ~0.0 (small noise)\n# y: ~0.0\n# z: ~9.81 (gravity)\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Terminal 3"}),": View camera image"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"ros2 run rqt_image_view rqt_image_view\n# Select topic: /camera/image_raw\n# Should see camera view (ground plane, sky)\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Terminal 4"}),": Check topic rates"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"ros2 topic hz /camera/image_raw\n# Expected: average rate: 30.0 (\xb10.5 Hz)\n\nros2 topic hz /imu\n# Expected: average rate: 100.0 (\xb11.0 Hz)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"step-7-debugging-1-2-hours",children:"Step 7: Debugging (1-2 hours)"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Issue 1"}),": Robot falls through floor"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Diagnosis"}),": Run ",(0,r.jsx)(e.code,{children:"gz topic -e -t /stats"})," \u2192 Check ",(0,r.jsx)(e.code,{children:"real_time_factor < 0.5"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fix"}),": Reduce physics complexity","\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:"<max_step_size>0.002</max_step_size>  \x3c!-- Increase timestep --\x3e\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Issue 2"}),": No sensor data on ROS 2 topics"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Diagnosis"}),": Bridge not running or wrong topic names"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fix"}),": Check Gazebo topic names","\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"gz topic -l | grep camera\n# If output is /world/humanoid_world/model/humanoid/link/camera_link/sensor/camera/image\n# Update bridge arguments to match full path\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Issue 3"}),": Robot vibrating/unstable"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Diagnosis"}),": Contact stiffness too low"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fix"}),": Increase contact parameters in collision surfaces","\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:"<contact>\n  <ode>\n    <kp>1e7</kp>  \x3c!-- Increase from 1e6 --\x3e\n    <kd>1e4</kd>  \x3c!-- Increase from 1e3 --\x3e\n  </ode>\n</contact>\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"7-end-of-chapter-project-custom-gazebo-world-with-obstacles",children:"7. End-of-Chapter Project: Custom Gazebo World with Obstacles"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Objective"}),": Create a Gazebo world with randomized obstacles (boxes, cylinders) for humanoid navigation testing."]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Requirements"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"World Layout"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"10m \xd7 10m ground plane"}),"\n",(0,r.jsx)(e.li,{children:"5-10 randomly placed obstacles (boxes: 0.5m \xd7 0.5m \xd7 1.0m)"}),"\n",(0,r.jsx)(e.li,{children:"Directional lighting with shadows"}),"\n",(0,r.jsx)(e.li,{children:"Textured ground (not plain gray)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Humanoid"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Spawn at origin (0, 0, 1.0)"}),"\n",(0,r.jsx)(e.li,{children:"Camera and IMU sensors"}),"\n",(0,r.jsx)(e.li,{children:"Contact sensors on both feet"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"ROS 2 Integration"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"All sensor data bridged to ROS 2"}),"\n",(0,r.jsx)(e.li,{children:"Launch file starts Gazebo + bridge + RViz"}),"\n",(0,r.jsx)(e.li,{children:"RViz shows: robot model, camera view, TF frames, laser scan (if added)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Validation"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Simulation runs at RTF > 0.9"}),"\n",(0,r.jsx)(e.li,{children:"All sensors publish at expected rates"}),"\n",(0,r.jsx)(e.li,{children:"Contact sensors detect when feet touch ground"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Starter Code"})," (procedural obstacle generation):"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'# scripts/generate_world.py\nimport random\nimport sys\n\ndef generate_world(num_obstacles=8):\n    sdf = """<?xml version="1.0"?>\n<sdf version="1.9">\n  <world name="obstacle_world">\n    <physics name="default_physics" type="dart">\n      <max_step_size>0.001</max_step_size>\n      <real_time_factor>1.0</real_time_factor>\n    </physics>\n\n    <light name="sun" type="directional">\n      <pose>0 0 10 0 0 0</pose>\n      <diffuse>1.0 1.0 1.0 1.0</diffuse>\n      <direction>-0.5 0.1 -0.9</direction>\n      <cast_shadows>true</cast_shadows>\n    </light>\n\n    <model name="ground_plane">\n      <static>true</static>\n      <link name="link">\n        <collision name="collision">\n          <geometry><plane><normal>0 0 1</normal></plane></geometry>\n          <surface>\n            <friction><ode><mu>1.0</mu><mu2>1.0</mu2></ode></friction>\n          </surface>\n        </collision>\n        <visual name="visual">\n          <geometry><plane><normal>0 0 1</normal><size>10 10</size></plane></geometry>\n          <material>\n            <ambient>0.5 0.5 0.5 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n"""\n\n    # Generate random obstacles\n    for i in range(num_obstacles):\n        x = random.uniform(-4.0, 4.0)\n        y = random.uniform(-4.0, 4.0)\n        height = random.uniform(0.5, 2.0)\n\n        sdf += f"""\n    <model name="obstacle_{i}">\n      <pose>{x} {y} {height/2} 0 0 0</pose>\n      <static>true</static>\n      <link name="link">\n        <collision name="collision">\n          <geometry><box><size>0.5 0.5 {height}</size></box></geometry>\n        </collision>\n        <visual name="visual">\n          <geometry><box><size>0.5 0.5 {height}</size></box></geometry>\n          <material>\n            <ambient>0.8 0.3 0.1 1</ambient>\n            <diffuse>0.9 0.4 0.2 1</diffuse>\n          </material>\n        </visual>\n      </link>\n    </model>\n"""\n\n    sdf += """\n    <include>\n      <uri>model://humanoid_with_sensors</uri>\n      <pose>0 0 1.0 0 0 0</pose>\n    </include>\n  </world>\n</sdf>\n"""\n\n    return sdf\n\nif __name__ == \'__main__\':\n    num_obstacles = int(sys.argv[1]) if len(sys.argv) > 1 else 8\n    world_sdf = generate_world(num_obstacles)\n\n    with open(\'worlds/obstacle_world.sdf\', \'w\') as f:\n        f.write(world_sdf)\n\n    print(f"Generated world with {num_obstacles} obstacles: worlds/obstacle_world.sdf")\n'})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Run"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"python3 scripts/generate_world.py 10\nros2 launch gazebo_humanoid_lab gazebo_humanoid.launch.py world:=obstacle_world.sdf\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(e.p,{children:"In this chapter, you learned:"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Simulator Selection"}),": Gazebo for ROS 2 integration, Isaac Sim for VLA training"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gazebo Architecture"}),": Client-server model, plugin system, Ignition Transport"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"ROS 2 Integration"}),": ",(0,r.jsx)(e.code,{children:"ros_gz_bridge"})," for topic mapping, launch file setup"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Physics Tuning"}),": Time step, solver iterations, contact properties for stability"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Sensor Simulation"}),": Camera, IMU, LiDAR, contact sensors with realistic noise models"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Debugging"}),": RTF monitoring, collision geometry optimization, sensor data verification"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Key Takeaways"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Always check real-time factor (RTF > 0.9 for real-time control)"}),"\n",(0,r.jsx)(e.li,{children:"Use DART physics for humanoids (better contact stability than ODE/Bullet)"}),"\n",(0,r.jsx)(e.li,{children:"Add realistic sensor noise (IMU: 0.5 deg/s gyro, 0.017 m/s\xb2 accel)"}),"\n",(0,r.jsx)(e.li,{children:"Start with simple collision geometry (boxes), add meshes only if needed"}),"\n",(0,r.jsx)(e.li,{children:"Bridge only necessary topics (reduces network overhead)"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Next Chapter Preview"}),": Chapter 6 covers NVIDIA Isaac Sim\u2014installation, URDF import, PhysX configuration, and your first GPU-parallelized simulation with 100+ humanoid robots."]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Gazebo Documentation"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Gazebo Harmonic Docs: ",(0,r.jsx)(e.a,{href:"https://gazebosim.org/docs/harmonic",children:"https://gazebosim.org/docs/harmonic"})]}),"\n",(0,r.jsxs)(e.li,{children:["SDF Specification: ",(0,r.jsx)(e.a,{href:"http://sdformat.org/spec",children:"http://sdformat.org/spec"})]}),"\n",(0,r.jsxs)(e.li,{children:["Gazebo Tutorials: ",(0,r.jsx)(e.a,{href:"https://gazebosim.org/docs/harmonic/tutorials",children:"https://gazebosim.org/docs/harmonic/tutorials"})]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"ROS 2 Integration"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["ros_gz Repository: ",(0,r.jsx)(e.a,{href:"https://github.com/gazebosim/ros_gz",children:"https://github.com/gazebosim/ros_gz"})]}),"\n",(0,r.jsxs)(e.li,{children:["ros_gz_bridge Tutorial: ",(0,r.jsx)(e.a,{href:"https://gazebosim.org/docs/harmonic/ros2_integration",children:"https://gazebosim.org/docs/harmonic/ros2_integration"})]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Physics Engines"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["ODE Manual: ",(0,r.jsx)(e.a,{href:"https://ode.org/wiki/index.php/Manual",children:"https://ode.org/wiki/index.php/Manual"})]}),"\n",(0,r.jsxs)(e.li,{children:["Bullet Physics: ",(0,r.jsx)(e.a,{href:"https://pybullet.org/wordpress/",children:"https://pybullet.org/wordpress/"})]}),"\n",(0,r.jsxs)(e.li,{children:["DART: ",(0,r.jsx)(e.a,{href:"https://dartsim.github.io/",children:"https://dartsim.github.io/"})]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Sensor Simulation"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Gazebo Sensors: ",(0,r.jsx)(e.a,{href:"https://gazebosim.org/api/sensors/8/tutorials.html",children:"https://gazebosim.org/api/sensors/8/tutorials.html"})]}),"\n",(0,r.jsxs)(e.li,{children:["IMU Noise Models: ",(0,r.jsx)(e.a,{href:"https://www.nxp.com/docs/en/application-note/AN5087.pdf",children:"https://www.nxp.com/docs/en/application-note/AN5087.pdf"})]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Example Worlds"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Gazebo Fuel (Model Database): ",(0,r.jsx)(e.a,{href:"https://app.gazebosim.org/fuel/models",children:"https://app.gazebosim.org/fuel/models"})]}),"\n",(0,r.jsxs)(e.li,{children:["ROS 2 Example Worlds: ",(0,r.jsx)(e.a,{href:"https://github.com/gazebosim/gz_sim_demos",children:"https://github.com/gazebosim/gz_sim_demos"})]}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"End of Chapter 5"})})]})}function h(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>a,x:()=>l});var i=s(6540);const r={},o=i.createContext(r);function a(n){const e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(o.Provider,{value:e},n.children)}}}]);