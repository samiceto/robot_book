"use strict";(self.webpackChunkphysical_ai_humanoid_robotics_book=self.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[118],{8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}},8687:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"part3-perception/jetson-orin-deployment","title":"Chapter 11: Jetson Orin Deployment","description":"Learning Objectives","source":"@site/docs/part3-perception/11-jetson-orin-deployment.md","sourceDirName":"part3-perception","slug":"/part3-perception/jetson-orin-deployment","permalink":"/robot_book/docs/part3-perception/jetson-orin-deployment","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":11,"frontMatter":{},"sidebar":"bookSidebar","previous":{"title":"Chapter 10: Object Detection with YOLO","permalink":"/robot_book/docs/part3-perception/object-detection-yolo"},"next":{"title":"Chapter 12: Containerization & CI/CD","permalink":"/robot_book/docs/part3-perception/containerization-cicd"}}');var r=i(4848),t=i(8453);const o={},l="Chapter 11: Jetson Orin Deployment",d={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"1. Jetson Orin Overview",id:"1-jetson-orin-overview",level:2},{value:"2. Installation",id:"2-installation",level:2},{value:"Flash JetPack 6.0",id:"flash-jetpack-60",level:3},{value:"Install ROS 2",id:"install-ros-2",level:3},{value:"Install Perception Stack",id:"install-perception-stack",level:3},{value:"3. Model Quantization (FP32 \u2192 INT8)",id:"3-model-quantization-fp32--int8",level:2},{value:"Why Quantization?",id:"why-quantization",level:3},{value:"Quantize YOLOv8",id:"quantize-yolov8",level:3},{value:"4. Power Modes",id:"4-power-modes",level:2},{value:"5. Profiling with Nsight Systems",id:"5-profiling-with-nsight-systems",level:2},{value:"6. Real-Time Perception Pipeline",id:"6-real-time-perception-pipeline",level:2},{value:"7. Hands-On Lab: Jetson Deployment (4 hours)",id:"7-hands-on-lab-jetson-deployment-4-hours",level:2},{value:"8. End-of-Chapter Project: Autonomous Navigation Vision",id:"8-end-of-chapter-project-autonomous-navigation-vision",level:2},{value:"Summary",id:"summary",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-11-jetson-orin-deployment",children:"Chapter 11: Jetson Orin Deployment"})}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Install"})," JetPack 6.0 and ROS 2 on Jetson Orin"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quantize"})," models to INT8 for 3-5x speedup"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Profile"})," GPU/DLA utilization with Nsight Systems"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optimize"})," power modes for battery life vs performance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Deploy"})," real-time perception pipeline (RealSense + YOLO)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-jetson-orin-overview",children:"1. Jetson Orin Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NVIDIA Jetson Orin Nano"})," (Recommended for humanoids):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GPU"}),": 1024 CUDA cores, 32 Tensor cores"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CPU"}),": 6-core Arm Cortex-A78"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RAM"}),": 8GB LPDDR5"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Power"}),": 7W - 25W (configurable)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Price"}),": ~$499"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance"}),": 40 TOPS INT8"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Why Jetson for Humanoids"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Low power (runs on battery)"}),"\n",(0,r.jsx)(n.li,{children:"Compact (70mm \xd7 45mm)"}),"\n",(0,r.jsx)(n.li,{children:"Real-time AI inference"}),"\n",(0,r.jsx)(n.li,{children:"ROS 2 compatible"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Alternatives"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Jetson Orin NX"})," ($599, 16GB RAM, 100 TOPS) - more headroom"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Raspberry Pi 5"})," (CPU-only, $80) - budget option, no GPU acceleration"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-installation",children:"2. Installation"}),"\n",(0,r.jsx)(n.h3,{id:"flash-jetpack-60",children:"Flash JetPack 6.0"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# On host PC (Ubuntu 22.04)\n# Download SDK Manager: https://developer.nvidia.com/sdk-manager\n\n# Install SDK Manager\nsudo dpkg -i sdkmanager_*.deb\n\n# Launch and follow GUI to flash Jetson\nsdkmanager\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"JetPack 6.0 includes"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ubuntu 22.04"}),"\n",(0,r.jsx)(n.li,{children:"CUDA 12.2"}),"\n",(0,r.jsx)(n.li,{children:"cuDNN 8.9"}),"\n",(0,r.jsx)(n.li,{children:"TensorRT 8.6"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"install-ros-2",children:"Install ROS 2"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# On Jetson (after first boot)\nsudo apt update\nsudo apt install ros-iron-desktop python3-colcon-common-extensions\n\n# Verify\nros2 topic list\n"})}),"\n",(0,r.jsx)(n.h3,{id:"install-perception-stack",children:"Install Perception Stack"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# RealSense\nsudo apt install ros-iron-realsense2-camera\n\n# YOLOv8 (with TensorRT support)\npip3 install ultralytics onnx onnxruntime-gpu\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-model-quantization-fp32--int8",children:"3. Model Quantization (FP32 \u2192 INT8)"}),"\n",(0,r.jsx)(n.h3,{id:"why-quantization",children:"Why Quantization?"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Precision"}),(0,r.jsx)(n.th,{children:"Model Size"}),(0,r.jsx)(n.th,{children:"Inference Speed"}),(0,r.jsx)(n.th,{children:"Accuracy Loss"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"FP32"}),(0,r.jsx)(n.td,{children:"100%"}),(0,r.jsx)(n.td,{children:"1x"}),(0,r.jsx)(n.td,{children:"0%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"FP16"}),(0,r.jsx)(n.td,{children:"50%"}),(0,r.jsx)(n.td,{children:"2x"}),(0,r.jsx)(n.td,{children:"<1%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"INT8"}),(0,r.jsx)(n.td,{children:"25%"}),(0,r.jsx)(n.td,{children:"3-5x"}),(0,r.jsx)(n.td,{children:"1-3%"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"quantize-yolov8",children:"Quantize YOLOv8"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from ultralytics import YOLO\n\n# Load model\nmodel = YOLO('yolov8n.pt')\n\n# Export to TensorRT INT8 (requires calibration data)\nmodel.export(\n    format='engine',\n    imgsz=640,\n    half=False,       # Set to True for FP16\n    int8=True,        # INT8 quantization\n    data='config.yaml',  # Calibration dataset\n    batch=1,\n    device=0\n)\n\n# Result: yolov8n.engine (INT8 optimized)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance Gain"})," (Jetson Orin Nano):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"FP32: 12 FPS"}),"\n",(0,r.jsx)(n.li,{children:"FP16: 25 FPS (2x speedup)"}),"\n",(0,r.jsx)(n.li,{children:"INT8: 50 FPS (4x speedup)"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-power-modes",children:"4. Power Modes"}),"\n",(0,r.jsx)(n.p,{children:"Jetson supports multiple power modes trading performance for battery life:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List available modes\nsudo /usr/sbin/nvpmodel -q\n\n# Modes (Jetson Orin Nano):\n# Mode 0: 25W (max performance)\n# Mode 1: 15W (balanced)\n# Mode 2: 7W (power saver)\n\n# Set to 15W mode\nsudo /usr/sbin/nvpmodel -m 1\n\n# Monitor power consumption\nsudo tegrastats\n# RAM 2048/8192MB CPU [15%@1420,10%@1420,8%@1420] GPU 45%@625MHz ...\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Battery Life Estimates"})," (5000mAh battery):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"25W mode: ~45 minutes"}),"\n",(0,r.jsx)(n.li,{children:"15W mode: ~1.5 hours"}),"\n",(0,r.jsx)(n.li,{children:"7W mode: ~3 hours"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-profiling-with-nsight-systems",children:"5. Profiling with Nsight Systems"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Profile perception pipeline\nnsys profile -o perception_profile \\\n  ros2 run my_package perception_node\n\n# View results (on host PC with GUI)\nnsys-ui perception_profile.qdrep\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Metrics"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GPU Utilization"}),": Target >70% (indicates GPU-bound, good)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CUDA Kernel Duration"}),": Identify slow layers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Memory Transfers"}),": Minimize CPU\u2194GPU copies"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Optimization Tips"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"pinned_memory=True"})," for faster CPU\u2192GPU transfer"]}),"\n",(0,r.jsx)(n.li,{children:"Batch inference (process 2-4 frames at once)"}),"\n",(0,r.jsx)(n.li,{children:"Async execution (overlap CPU/GPU work)"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-real-time-perception-pipeline",children:"6. Real-Time Perception Pipeline"}),"\n",(0,r.jsx)(n.p,{children:"Deploy RealSense + YOLO on Jetson:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import Image\nfrom vision_msgs.msg import Detection2DArray\nfrom cv_bridge import CvBridge\nfrom ultralytics import YOLO\n\nclass PerceptionNode(Node):\n    def __init__(self):\n        super().__init__('perception_node')\n\n        # Load TensorRT INT8 model\n        self.model = YOLO('yolov8n.engine')  # Optimized for Jetson\n        self.bridge = CvBridge()\n\n        # Subscribe to RealSense\n        self.subscription = self.create_subscription(\n            Image, '/camera/color/image_raw', self.image_callback, 10)\n\n        # Publish detections\n        self.publisher = self.create_publisher(Detection2DArray, '/detections', 10)\n\n        self.get_logger().info('Perception node started on Jetson Orin')\n\n    def image_callback(self, msg):\n        # Convert to OpenCV\n        cv_image = self.bridge.imgmsg_to_cv2(msg, 'bgr8')\n\n        # Run YOLO (INT8 TensorRT)\n        results = self.model.predict(cv_image, verbose=False)\n\n        # Publish detections\n        detections_msg = Detection2DArray()\n        # ... (populate detections) ...\n        self.publisher.publish(detections_msg)\n\ndef main():\n    rclpy.init()\n    node = PerceptionNode()\n    rclpy.spin(node)\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Launch"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Set to 15W mode (balanced)\nsudo nvpmodel -m 1\n\n# Run perception\nros2 run my_package perception_node\n\n# Expected: 30-40 FPS at 15W\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-hands-on-lab-jetson-deployment-4-hours",children:"7. Hands-On Lab: Jetson Deployment (4 hours)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": Deploy complete perception pipeline to Jetson Orin."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Steps"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Flash JetPack 6.0 to Jetson"}),"\n",(0,r.jsx)(n.li,{children:"Install ROS 2 + RealSense + YOLOv8"}),"\n",(0,r.jsx)(n.li,{children:"Quantize YOLOv8n to INT8"}),"\n",(0,r.jsx)(n.li,{children:"Deploy perception node"}),"\n",(0,r.jsx)(n.li,{children:"Profile with Nsight Systems"}),"\n",(0,r.jsx)(n.li,{children:"Test at 15W power mode"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Validation"}),":"]}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Runs at \u226530 FPS"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","GPU utilization \u226560%"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Power consumption \u226415W"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Detects objects with \u226545 mAP"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"8-end-of-chapter-project-autonomous-navigation-vision",children:"8. End-of-Chapter Project: Autonomous Navigation Vision"}),"\n",(0,r.jsx)(n.p,{children:"Build vision system for humanoid autonomous navigation."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Detect obstacles (people, furniture) using YOLO"}),"\n",(0,r.jsx)(n.li,{children:"Estimate distance using RealSense depth"}),"\n",(0,r.jsxs)(n.li,{children:["Publish obstacle map to ",(0,r.jsx)(n.code,{children:"/obstacle_map"})]}),"\n",(0,r.jsx)(n.li,{children:"Run on Jetson at \u226520 FPS, \u226415W"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Deliverables"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ROS 2 package deployable to Jetson"}),"\n",(0,r.jsx)(n.li,{children:"TensorRT INT8 model"}),"\n",(0,r.jsx)(n.li,{children:"Power profiling report"}),"\n",(0,r.jsx)(n.li,{children:"Demo video (robot navigating around obstacles)"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"You learned to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Install JetPack and ROS 2 on Jetson Orin"}),"\n",(0,r.jsx)(n.li,{children:"Quantize models to INT8 for 3-5x speedup"}),"\n",(0,r.jsx)(n.li,{children:"Profile GPU utilization with Nsight"}),"\n",(0,r.jsx)(n.li,{children:"Optimize power modes for battery operation"}),"\n",(0,r.jsx)(n.li,{children:"Deploy real-time perception at 30+ FPS on edge"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Next"}),": Chapter 12 covers containerization with Docker and CI/CD pipelines."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);