"use strict";(self.webpackChunkphysical_ai_humanoid_robotics_book=self.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[739],{5682:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"part3-perception/containerization-cicd","title":"Chapter 12: Containerization & CI/CD","description":"Learning Objectives","source":"@site/docs/part3-perception/12-containerization-cicd.md","sourceDirName":"part3-perception","slug":"/part3-perception/containerization-cicd","permalink":"/robot_book/docs/part3-perception/containerization-cicd","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":12,"frontMatter":{},"sidebar":"bookSidebar","previous":{"title":"Chapter 11: Jetson Orin Deployment","permalink":"/robot_book/docs/part3-perception/jetson-orin-deployment"},"next":{"title":"Chapter 13: VLA Architecture Fundamentals","permalink":"/robot_book/docs/part4-vla/vla-architecture"}}');var o=s(4848),r=s(8453);const t={},l="Chapter 12: Containerization & CI/CD",c={},a=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"1. Why Containerization?",id:"1-why-containerization",level:2},{value:"2. Docker Basics",id:"2-docker-basics",level:2},{value:"Install Docker",id:"install-docker",level:3},{value:"Basic Dockerfile (ROS 2)",id:"basic-dockerfile-ros-2",level:3},{value:"Build and Run",id:"build-and-run",level:3},{value:"3. Multi-Arch Images (x86 + ARM64)",id:"3-multi-arch-images-x86--arm64",level:2},{value:"Use Docker Buildx",id:"use-docker-buildx",level:3},{value:"4. Docker Compose (Multi-Node)",id:"4-docker-compose-multi-node",level:2},{value:"5. CI/CD with GitHub Actions",id:"5-cicd-with-github-actions",level:2},{value:"6. Deployment to Jetson",id:"6-deployment-to-jetson",level:2},{value:"One-Command Deployment",id:"one-command-deployment",level:3},{value:"Auto-Update on Git Push",id:"auto-update-on-git-push",level:3},{value:"7. Hands-On Lab: Full CI/CD Pipeline (4 hours)",id:"7-hands-on-lab-full-cicd-pipeline-4-hours",level:2},{value:"8. End-of-Chapter Project: Production Deployment",id:"8-end-of-chapter-project-production-deployment",level:2},{value:"Summary",id:"summary",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"chapter-12-containerization--cicd",children:"Chapter 12: Containerization & CI/CD"})}),"\n",(0,o.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Containerize"})," ROS 2 applications with Docker"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Build"})," multi-arch images (x86 + ARM64) for Jetson"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Deploy"})," with Docker Compose for multi-node systems"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Automate"})," testing with GitHub Actions"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Implement"})," CI/CD pipeline for continuous deployment"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"1-why-containerization",children:"1. Why Containerization?"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Problems Without Containers"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:'"Works on my machine" syndrome'}),"\n",(0,o.jsx)(n.li,{children:"Dependency conflicts (ROS 2 Iron vs Jazzy)"}),"\n",(0,o.jsx)(n.li,{children:"Manual deployment steps"}),"\n",(0,o.jsx)(n.li,{children:"Difficult to reproduce environments"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Docker Benefits"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Reproducibility"}),": Identical environment everywhere"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Isolation"}),": Each service has own dependencies"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Portability"}),": Same container on dev PC and Jetson"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Scalability"}),": Easy to orchestrate multiple nodes"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"2-docker-basics",children:"2. Docker Basics"}),"\n",(0,o.jsx)(n.h3,{id:"install-docker",children:"Install Docker"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Install on Ubuntu\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\n\n# Add user to docker group (no sudo needed)\nsudo usermod -aG docker $USER\nnewgrp docker\n\n# Verify\ndocker run hello-world\n"})}),"\n",(0,o.jsx)(n.h3,{id:"basic-dockerfile-ros-2",children:"Basic Dockerfile (ROS 2)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-dockerfile",children:'FROM ros:iron-ros-base\n\n# Install dependencies\nRUN apt-get update && apt-get install -y \\\n    ros-iron-realsense2-camera \\\n    python3-pip \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Install Python packages\nRUN pip3 install ultralytics\n\n# Copy ROS 2 workspace\nCOPY ./ros2_ws /ros2_ws\n\n# Build workspace\nRUN . /opt/ros/iron/setup.sh && \\\n    cd /ros2_ws && \\\n    colcon build --symlink-install\n\n# Source workspace on container start\nRUN echo "source /ros2_ws/install/setup.bash" >> ~/.bashrc\n\n# Set entrypoint\nCMD ["bash"]\n'})}),"\n",(0,o.jsx)(n.h3,{id:"build-and-run",children:"Build and Run"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Build image\ndocker build -t humanoid_perception:latest .\n\n# Run container\ndocker run -it --rm \\\n  --network host \\\n  --device /dev/video0 \\\n  humanoid_perception:latest\n\n# Inside container\nros2 launch my_package perception.launch.py\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"3-multi-arch-images-x86--arm64",children:"3. Multi-Arch Images (x86 + ARM64)"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Goal"}),": Single image runs on dev PC (x86) and Jetson (ARM64)."]}),"\n",(0,o.jsx)(n.h3,{id:"use-docker-buildx",children:"Use Docker Buildx"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Enable buildx\ndocker buildx create --name multiarch --use\n\n# Build for both architectures\ndocker buildx build --platform linux/amd64,linux/arm64 \\\n  -t myuser/humanoid_perception:latest \\\n  --push \\\n  .\n\n# Result: Image works on x86 PC and ARM64 Jetson\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"4-docker-compose-multi-node",children:"4. Docker Compose (Multi-Node)"}),"\n",(0,o.jsx)(n.p,{children:"Deploy entire ROS 2 system with one command:"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"docker-compose.yml"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"version: '3.8'\n\nservices:\n  realsense:\n    image: myuser/realsense:latest\n    devices:\n      - /dev/bus/usb:/dev/bus/usb  # USB camera access\n    network_mode: host\n    command: ros2 launch realsense2_camera rs_launch.py\n\n  perception:\n    image: myuser/perception:latest\n    network_mode: host\n    depends_on:\n      - realsense\n    command: ros2 run my_package perception_node\n\n  navigation:\n    image: myuser/navigation:latest\n    network_mode: host\n    depends_on:\n      - perception\n    command: ros2 launch nav2_bringup navigation_launch.py\n\n  rviz:\n    image: myuser/rviz:latest\n    network_mode: host\n    environment:\n      - DISPLAY=$DISPLAY\n    volumes:\n      - /tmp/.X11-unix:/tmp/.X11-unix\n    command: rviz2\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Deploy"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Start all services\ndocker-compose up -d\n\n# View logs\ndocker-compose logs -f perception\n\n# Stop all\ndocker-compose down\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"5-cicd-with-github-actions",children:"5. CI/CD with GitHub Actions"}),"\n",(0,o.jsx)(n.p,{children:"Automate build, test, and deployment on every git push."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:".github/workflows/ci.yml"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'name: ROS 2 CI\n\non: [push, pull_request]\n\njobs:\n  build-and-test:\n    runs-on: ubuntu-22.04\n\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v3\n\n      - name: Setup ROS 2\n        uses: ros-tooling/setup-ros@v0.6\n        with:\n          required-ros-distributions: iron\n\n      - name: Build workspace\n        run: |\n          source /opt/ros/iron/setup.bash\n          colcon build --symlink-install\n\n      - name: Run tests\n        run: |\n          source /opt/ros/iron/setup.bash\n          source install/setup.bash\n          colcon test\n          colcon test-result --verbose\n\n      - name: Build Docker image\n        run: |\n          docker build -t humanoid_perception:${{ github.sha }} .\n\n      - name: Push to Docker Hub\n        if: github.ref == \'refs/heads/main\'\n        run: |\n          echo "${{ secrets.DOCKER_PASSWORD }}" | docker login -u "${{ secrets.DOCKER_USERNAME }}" --password-stdin\n          docker tag humanoid_perception:${{ github.sha }} myuser/humanoid_perception:latest\n          docker push myuser/humanoid_perception:latest\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Workflow"}),":"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Developer pushes code to GitHub"}),"\n",(0,o.jsx)(n.li,{children:"GitHub Actions runs automatically"}),"\n",(0,o.jsx)(n.li,{children:"Builds ROS 2 workspace"}),"\n",(0,o.jsx)(n.li,{children:"Runs all tests"}),"\n",(0,o.jsx)(n.li,{children:"Builds Docker image"}),"\n",(0,o.jsx)(n.li,{children:"Pushes to Docker Hub (if main branch)"}),"\n",(0,o.jsx)(n.li,{children:"Jetson pulls latest image and redeploys"}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"6-deployment-to-jetson",children:"6. Deployment to Jetson"}),"\n",(0,o.jsx)(n.h3,{id:"one-command-deployment",children:"One-Command Deployment"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# On Jetson\n# Pull latest image\ndocker pull myuser/humanoid_perception:latest\n\n# Run with GPU support\ndocker run -it --rm \\\n  --runtime nvidia \\\n  --network host \\\n  --device /dev/video0 \\\n  myuser/humanoid_perception:latest \\\n  ros2 run my_package perception_node\n"})}),"\n",(0,o.jsx)(n.h3,{id:"auto-update-on-git-push",children:"Auto-Update on Git Push"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"On Jetson"})," (install watchtower):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker run -d \\\n  --name watchtower \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  containrrr/watchtower \\\n  --interval 300  # Check every 5 minutes\n\n# Watchtower automatically pulls and restarts updated containers\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"7-hands-on-lab-full-cicd-pipeline-4-hours",children:"7. Hands-On Lab: Full CI/CD Pipeline (4 hours)"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Goal"}),": Implement complete CI/CD from git push to Jetson deployment."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Steps"}),":"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Dockerize perception package"}),"\n",(0,o.jsx)(n.li,{children:"Setup GitHub Actions workflow"}),"\n",(0,o.jsx)(n.li,{children:"Configure Docker Hub repository"}),"\n",(0,o.jsx)(n.li,{children:"Deploy to Jetson with docker-compose"}),"\n",(0,o.jsx)(n.li,{children:"Test auto-update with code change"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Validation"}),":"]}),"\n",(0,o.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Push to GitHub triggers build"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Tests pass in CI"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Docker image pushed to registry"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Jetson auto-pulls and restarts"]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Perception runs correctly after update"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"8-end-of-chapter-project-production-deployment",children:"8. End-of-Chapter Project: Production Deployment"}),"\n",(0,o.jsx)(n.p,{children:"Deploy full humanoid perception system with CI/CD."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Multi-service architecture (RealSense + YOLO + Nav2)"}),"\n",(0,o.jsx)(n.li,{children:"Docker Compose orchestration"}),"\n",(0,o.jsx)(n.li,{children:"GitHub Actions CI/CD"}),"\n",(0,o.jsx)(n.li,{children:"Automated testing (unit + integration)"}),"\n",(0,o.jsx)(n.li,{children:"One-command deployment to Jetson"}),"\n",(0,o.jsx)(n.li,{children:"Auto-update on main branch merge"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Deliverables"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Dockerfile for each service"}),"\n",(0,o.jsx)(n.li,{children:"docker-compose.yml"}),"\n",(0,o.jsx)(n.li,{children:"GitHub Actions workflow"}),"\n",(0,o.jsx)(n.li,{children:"Deployment documentation"}),"\n",(0,o.jsx)(n.li,{children:"Demo video (git push \u2192 auto-deploy \u2192 robot operating)"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Grading"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Architecture"})," (30%): Clean service separation"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"CI/CD"})," (30%): Automated build/test/deploy"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Testing"})," (20%): Comprehensive test coverage"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Documentation"})," (20%): Clear deployment guide"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(n.p,{children:"You learned to:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Containerize ROS 2 applications with Docker"}),"\n",(0,o.jsx)(n.li,{children:"Build multi-arch images for x86 and ARM64"}),"\n",(0,o.jsx)(n.li,{children:"Orchestrate multi-node systems with Docker Compose"}),"\n",(0,o.jsx)(n.li,{children:"Automate testing with GitHub Actions"}),"\n",(0,o.jsx)(n.li,{children:"Implement CI/CD for continuous deployment"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Part 3 Complete!"})," You can now build production-ready perception systems with automated deployment to edge devices."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Docker Documentation"}),": ",(0,o.jsx)(n.a,{href:"https://docs.docker.com/",children:"https://docs.docker.com/"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ROS 2 Docker Best Practices"}),": ",(0,o.jsx)(n.a,{href:"https://docs.ros.org/en/iron/How-To-Guides/Run-2-nodes-in-single-or-separate-docker-containers.html",children:"https://docs.ros.org/en/iron/How-To-Guides/Run-2-nodes-in-single-or-separate-docker-containers.html"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"GitHub Actions for ROS"}),": ",(0,o.jsx)(n.a,{href:"https://github.com/ros-tooling/action-ros-ci",children:"https://github.com/ros-tooling/action-ros-ci"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"NVIDIA Container Toolkit"}),": ",(0,o.jsx)(n.a,{href:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/",children:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/"})]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"End of Chapter 12 - Part 3 Complete"})}),"\n",(0,o.jsxs)(n.p,{children:["You have completed ",(0,o.jsx)(n.strong,{children:"Part 3: Perception & Edge Deployment"}),". You can integrate RealSense cameras, run YOLO object detection, deploy to Jetson Orin with quantization, and automate deployment with CI/CD."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Progress"}),": 12 of 21 chapters complete (57%)"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Next"}),": Part 4 (Vision-Language-Action Models) covers VLA architecture, OpenVLA fine-tuning, multimodal reasoning, and end-to-end visuomotor control."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var i=s(6540);const o={},r=i.createContext(o);function t(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);